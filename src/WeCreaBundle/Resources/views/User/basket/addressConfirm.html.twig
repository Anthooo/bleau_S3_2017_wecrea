{% extends '@WeCrea/layout/base_client.html.twig' %}

{% block body %}
    <main>
        <div class="container">
            <div class="row row_top addressCont">
                {% include '@WeCrea/User/basket/addressUser.html.twig' %}
            </div>
            <div class="row">
                <div class="col m6 s12 center-align">
                    <a class="waves-effect waves-light btn black " href="#modal1">Changer d'adresse</a>
                </div>
                <div class="col m6 s12 center-align">
                    <a class="waves-effect waves-light btn black center-align" href="{{ path('we_crea_basket_command') }}">Passer au paiement</a>
                </div>
            </div>

            <div id="modal1" class="modal modal-fixed-footer">
                <div class="modal-content">
                    {{ form_start(formUser) }}

                    <span>Adresse de livraison :</span>
                    {{ form_row(formUser.address1) }}
                    {{ form_row(formUser.zipCode1) }}
                    {{ form_row(formUser.town1) }}
                    <span>Adresse de facturation :</span>
                    {{ form_row(formUser.address2) }}
                    {{ form_row(formUser.zipCode2) }}
                    {{ form_row(formUser.town2) }}
                    <input type="submit" class="btn black" value="Ã©diter">

                    {{ form_end(formUser, {'render_rest': false}) }}

                </div>

        </div>

        </div>
    </main>

{% endblock %}

{% block javascripts %}
    <script>
        $(document).ready( function () {
            $('form[name="app_user_profil"]').submit( function (e) {
                e.preventDefault();
                $data = $(this).serialize();

                $.ajax({
                    method: 'post',
                    url: '{{ path('we_crea_basket_address') }}',
                    data: $data,

                    success: function (response) {
                        console.log(response);
                        $('.addressCont').children().remove();
                        $('.addressCont').html(response);
                        $('.modal').modal('close');

                    }
                });
            });
        })
    </script>
{% endblock %}